<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/notesModel.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/notesModel.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const mongoose = require('mongoose');
const Schema = mongoose.Schema;

const noteSchema = new Schema(
	{
		message: {
			type: String,
			trim: true,
			required: true
		},
		type: {
			type: String,
			trim: true,
			required: true
		},
		userId: {
			type: Schema.Types.ObjectId,
			required: true,
			ref: 'users'
		}
	},
	{
		timestamps: true
	}
);

const notes = mongoose.model('notes', noteSchema);
/**
 * a class representing notes model
 */
class NotesModel {
	/**
	 * method to add notes
	 * @param {Body} noteData - noteData body
	 * @param {callback} callback - callback method
	 */
	addNote(noteData, callback) {
		console.log(' request in add note model', noteData);
		const notesDb = new notes({
			message: noteData.message,
			type: noteData.type,
			userId: noteData.userId
		});

		notesDb.save((err, res) => {
			if (err) {
				console.log('err:', err);
				callback(err);
			} else {
				console.log('res in after save:', res);
				callback(null, res);
			}
		});
	}
	/**
	 * method to update notes
	 * @param {string} id - id string
	 * @param {Body} noteData - noteData body
	 * @param {callback} callback - callback method
	 */
	updateNote(id, noteData, callback) {
		id = mongoose.Types.ObjectId(id);
		console.log(' request in add note model', noteData);

		notes.findByIdAndUpdate(id, noteData, (err, data) => {
			if (err) {
				console.log('error finding id model');
				callback(err);
			} else {
				console.log('note updated succesfully', data);
				callback(null, data);
			}
		});
	}
	/**
	 * method to delete notes
	 * @param {string} id - id string
	 * @param {callback} callback - callback method
	 */
	deleteNote(id, callback) {
		id = mongoose.Types.ObjectId(id);
		console.log(' request in delete note model', id);

		notes.findByIdAndDelete(id, (err, data) => {
			if (err) {
				console.log('error finding id model');
				callback(err);
			} else {
				console.log('note deleted succesfully', data);
				callback(null, data);
			}
		});
	}
	/**
	 * method to get all notes
	 * @param {string} userId - userId string
	 * @param {callback} callback - callback method
	 */
	getAllUserNotes(userId, callback) {
		userId = mongoose.Types.ObjectId(userId);
		console.log('userId:', userId);
		notes.find({ userId: userId }, (err, result) => {
			if (err) {
				console.log('err:', err);
				callback(err);
			} else {
				console.log('result:', result);
				callback(null, result);
			}
		});
	}
}

module.exports = new NotesModel();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-tokenGenerator.html">tokenGenerator</a></li><li><a href="module-tokenVerifyer.html">tokenVerifyer</a></li></ul><h3>Classes</h3><ul><li><a href="NotesModel.html">NotesModel</a></li><li><a href="NotesService.html">NotesService</a></li><li><a href="UserModel.html">UserModel</a></li><li><a href="UserService.html">UserService</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Fri Jul 23 2021 04:55:08 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
